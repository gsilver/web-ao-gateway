<div class="container-fluid" style="margin-top:80px">
  <div class="container">
    <a href="" style="position:fixed;right:0;top:60px;width:30px" ng-click="showDebug = !showDebug">&nbsp;</a>
    <!-- <div ng-show="showDebug"> -->
    <div>
      orderModel
      <div class="alert alert-info">
        {{orderModel}}
      </div>
      validationModel
      <div class="alert alert-danger">
        {{validationModel}}
      </div>
      failedValidation
      <div class="alert alert-info">
        {{failedValidation}}
      </div>
    </div>
    <!--Site Options-->
    <div id="site">
      <fieldset class="form-group" ng-class="failedValidation.site ? 'has-danger' : 'class-if-false'">
        <legend>Choose A Site Or An Application</legend>

        <div class="form-check">
          <label class="form-check-label">
                <input type="radio" ng-model="orderModel.site" ng-click="resetOrder('site')" value="site" class="form-check-input" name="optionSite" checked>
                Simple Website
              </label>
        </div>

        <div class="form-check">
          <label class="form-check-label">
                    <input type="radio" ng-model="orderModel.site" ng-click="resetOrder('app')"  value="app" class="form-check-input" name="optionApp">
                    Custom Application
              </label>
        </div>
      </fieldset>
    </div>

    <!--Site Environment Options-->
    <div id="simple" ng-show="orderModel.site ==='site'">
      <div id="env" ng-class="failedValidation.env ? 'has-danger' : 'class-if-false'">
        <fieldset class="form-group">
          <legend>Choose An Environment</legend>

          <div class="form-check">
            <label class="form-check-label">
                    <input type="radio" ng-model="orderModel.env" value="google" class="form-check-input">
                    Google Site
                </label>
          </div>

          <div class="form-check">
            <label class="form-check-label">
                    <input type="radio" ng-model="orderModel.env" value="drupal" class="form-check-input">
                    Drupal
                  </label>
          </div>
        </fieldset>
      </div>
    </div>

    <!--Application Environment Options-->
    <div id="app" ng-show="orderModel.site ==='app'">
      <div id="env" ng-class="failedValidation.env ? 'has-danger' : 'class-if-false'">
        <fieldset class="form-group">
          <legend>Choose An Environment</legend>

          <div class="form-check">
            <label class="form-check-label">
                    <input type="radio" ng-model="orderModel.env" value="drupal" class="form-check-input">
                    Drupal
                </label>
          </div>

          <div class="form-check">
            <label class="form-check-label">
                    <input type="radio" ng-model="orderModel.env" value="python2" class="form-check-input">
                    Python 2.x
                  </label>
          </div>

          <div class="form-check">
            <label class="form-check-label">
                    <input type="radio" ng-model="orderModel.env" value="python3" class="form-check-input">
                    Python 3.x
                  </label>
          </div>

          <div class="form-check">
            <label class="form-check-label">
                    <input type="radio" ng-model="orderModel.env" value="ruby" class="form-check-input">
                    Ruby
                  </label>
          </div>

          <div class="form-check">
            <label class="form-check-label">
                    <input type="radio" ng-model="orderModel.env" value="java" class="form-check-input">
                    Java
                  </label>
          </div>

          <div class="form-check">
            <label class="form-check-label">
                    <input type="radio" ng-model="orderModel.env" value="nodejs" class="form-check-input">
                    NodeJS
                  </label>
          </div>

          <div class="form-check">
            <label class="form-check-label">
                    <input type="radio" ng-model="orderModel.env" value="php" class="form-check-input">
                    PHP
                  </label>
          </div>
        </fieldset>
      </div>
    </div>

    <!--Database Options-->
    <div id="db" ng-show="orderModel.site ==='app' && orderModel.env">
      <fieldset class="form-group">
        <legend>Database Options</legend>

        <div class="form-check form-check-inline">
          <label class="form-check-label">
                    <input type="radio" ng-model="orderModel.db" value="yes" class="form-check-input">
                    Yes
                  </label>
        </div>

        <div class="form-check form-check-inline">
          <label class="form-check-label">
                    <input type="radio" ng-model="orderModel.db" value="no" class="form-check-input">
                    No
                  </label>
        </div>
      </fieldset>
    </div>

    <!--URL, Availibilty, Sensitive Data, Shortcode-->
    <div ng-show="(orderModel.site ==='site' && orderModel.env !== null) || (orderModel.site ==='app' && orderModel.env !== null  && orderModel.db !==null)">
      <fieldset class="form-group">
        <legend>Additional Information</legend>
        <div id="url" ng-class="failedValidation.url ? 'has-danger' : 'class-if-false'">
          <label for="url-input">Choose a prefix</label><br>
          <span style="color:#d9534f" ng-show="validationModel.url===false">{{validationModel.url_reason}}</span>
          <div class="form-inline" ng-class="validationModel.url===false ? 'has-danger' : 'class-if-false'">
            <input type="text" ng-model="orderModel.url" ng-blur="validateUrl()" class="form-control" placeholder="Enter url">&nbsp; . &nbsp;
            <input type="text" disabled class="form-control" placeholder="web.umich.edu"> &nbsp;&nbsp;<span ng-show="orderModel.url"> https://{{orderModel.url}}.web.umich.edu </span>
          </div>
          <small id="urlHelp" class="form-text text-muted">Lorem ipsum dolor sit amet, consectetur adipiscing.</small>
        </div>

        <div id="avail" style="margin-top:30px;" ng-class="failedValidation.avail ? 'has-danger' : 'class-if-false'">
          <label for="avail-input">High availibility?</label>
          <div class="form-check">
            <label class="form-check-label">
                    <input type="radio" ng-model="orderModel.avail" value="yes" class="form-check-input">
                    Yes
                </label>
          </div>
          <div class="form-check">
            <label class="form-check-label">
                    <input type="radio" ng-model="orderModel.avail" value="no" class="form-check-input">
                    No
                </label>
          </div>
        </div>

        <div id="itar" style="margin-top:30px;" ng-class="failedValidation.itar ? 'has-danger' : 'class-if-false'">
          <label for="itar-input">Does your site contain sensitive data?</label>
          <a href="https://www.safecomputing.umich.edu/dataguide/?q=home">Read more about the Umich Sensitive Data Guide</a>

          <div class="form-check">
            <label class="form-check-label">
                    <input type="radio" ng-model="orderModel.itar" value="yes" class="form-check-input">
                    Yes. My Site Will Host Sensitive Data
                </label>
          </div>
          <div class="form-check">
            <label class="form-check-label">
                    <input type="radio" ng-model="orderModel.itar" value="no" class="form-check-input">
                    No. My Site Will Not Host Sensitive Data
                </label>
          </div>
        </div>

        <div id="shortcode" style="margin-top:50px;" ng-class="failedValidation.shortcode ? 'has-danger' : 'class-if-false'">
          <label for="shortcode-input">Enter a shortcode</label><br>
          <span style="color:#d9534f" ng-show="validationModel.shortcode===false">{{validationModel.shortcode_reason}}</span>
          <table ng-show="validationModel.shortcode_metadata" class="table table-striped">
            <thead>
              <tr>
                <th>
                  Field
                </th>
                <th>
                  Value
                </th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="(key, value) in validationModel.shortcode_metadata">
                <td>{{key}}</td>
                <td>{{value}}</td>
              </tr>
            </tbody>
          </table>
          <input type="text" ng-model="orderModel.shortcode" ng-blur="validateShortCode()" class="form-control" placeholder="Enter shortcode">
          <small id="shortcodeHelp" class="form-text text-muted">Lorem ipsum dolor sit amet, consectetur adipiscing.</small>
        </div>
      </fieldset>
    </div>
    <!-- Contact Information -->
    <div id="contact" ng-show="orderModel.url != null && orderModel.avail != null && orderModel.itar != null && orderModel.shortcode != null">
      <fieldset class="form-group">
        <legend>Contact Information</legend>

        <div id="uniq" ng-class="failedValidation.uniq ? 'has-danger' : 'class-if-false'">
          <label for="uniq-input">Uniqname</label>
          <input type="text" ng-model="orderModel.uniq" class="form-control" placeholder="Enter uniqname">
        </div>
        <div id="mcomm" style="margin-top:30px;" ng-class="failedValidation.mcomm ? 'has-danger' : 'class-if-false'">
          <label for="mcomm-input">MCommunity Group</label>
          <input type="text" ng-model="orderModel.mcomm" class="form-control" placeholder="Enter MCommunity Group">
        </div>
      </fieldset>
    </div>
    <!-- only seen when request is complete -->
    <button class="btn btn-primary" ng-click="validateAndPreview()" ng-show="orderComplete">
        Preview Request
      </button>
    <span ng-if="failedValidationGlobal"> Oops. You may have skipped some settings, scroll up to see.</span>
  </div>
</div>
<!-- Modal -->
<div class="modal fade" id="requestPreview" tabindex="-1" role="dialog" aria-labelledby="requestPreviewModalTitle" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="requestPreviewModalTitle">Request Preview</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <table class="table">
          <thead class="sr-only">
            <tr>
              <th scope="col">
                Detail
              </th>
              <th scope="col">
                Value
              </th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                Site type
              </td>
              <td>
                {{orderModel.site}}
              </td>
            </tr>
            <tr>
              <td>
                Environment
              </td>
              <td>
                {{orderModel.env}}
              </td>
            </tr>
            <tr ng-show="orderModel.db">
              <td>
                Database
              </td>
              <td>
                {{orderModel.db}}
              </td>
            </tr>
            <tr>
              <td>
                URL requested
              </td>
              <td>
                {{orderModel.url}}.web.umich.edu
              </td>
            </tr>
            <tr>
              <td>
                High availability
              </td>
              <td>
                {{orderModel.avail}}
              </td>
            </tr>
            <tr>
              <td>
                Shortcode
              </td>
              <td>
                {{orderModel.avail}}
              </td>
            </tr>
            <tr>
              <td>
                Sensitive data
              </td>
              <td>
                {{orderModel.avail}}
              </td>
            </tr>
            <tr>
              <td>
                Uniqname
              </td>
              <td>
                {{orderModel.uniq}}
              </td>
            </tr>
            <tr>
              <td>
                MComm group
              </td>
              <td>
                {{orderModel.mcomm}}
              </td>
            </tr>
            <tr>
              <td>
                Free
              </td>
              <td>
                {{orderModel.free}}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary">Submit Request</button>
      </div>

    </div>
  </div>
</div>
